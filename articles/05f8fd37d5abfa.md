---
title: "Gitã®äº‹æ•…ã‚’é˜²ãï¼ãƒãƒ¼ãƒ é–‹ç™ºã®ãŸã‚ã®å®‰å…¨å¯¾ç­–ã‚¬ã‚¤ãƒ‰"
emoji: "ğŸ›¡ï¸"
type: "tech"
topics: ["git", "github", "é–‹ç™ºæ‰‹æ³•", "ãƒãƒ¼ãƒ é–‹ç™º", "äº‹æ•…é˜²æ­¢"]
published: true
---

# Gitã®äº‹æ•…ã‚’é˜²ãï¼ãƒãƒ¼ãƒ é–‹ç™ºã®ãŸã‚ã®å®‰å…¨å¯¾ç­–ã‚¬ã‚¤ãƒ‰

ã“ã®è¨˜äº‹ã§ã¯ã€Gitã‚’ä½¿ç”¨ã—ãŸãƒãƒ¼ãƒ é–‹ç™ºã«ãŠã„ã¦ç™ºç”Ÿã—ãŒã¡ãªäº‹æ•…ã¨ãã®é˜²æ­¢ç­–ã«ã¤ã„ã¦è§£èª¬ã—ã¾ã™ã€‚ç‰¹ã«ã€mainãƒ–ãƒ©ãƒ³ãƒã¸ã®èª¤pushã‚„é‡è¦ãªã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤ãªã©ã€ã‚ˆãã‚ã‚‹äº‹æ•…ã®é˜²æ­¢æ–¹æ³•ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ã„ã¾ã™ã€‚

## ç›®æ¬¡
1. ã‚ˆãã‚ã‚‹Gitã®äº‹æ•…ã¨ãã®å½±éŸ¿
2. äº‹å‰ã®äºˆé˜²ç­–
3. ãƒ–ãƒ©ãƒ³ãƒä¿è­·ã®è¨­å®š
4. Git hooks ã®æ´»ç”¨
5. ãƒãƒ¼ãƒ å…¨ä½“ã§ã®å–ã‚Šçµ„ã¿
6. äº‹æ•…ãŒèµ·ããŸæ™‚ã®å¯¾å‡¦æ³•

## 1. ã‚ˆãã‚ã‚‹Gitã®äº‹æ•…ã¨ãã®å½±éŸ¿

### ä¸»ãªäº‹æ•…ãƒ‘ã‚¿ãƒ¼ãƒ³

1. mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ç›´æ¥push
2. èª¤ã£ãŸãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒãƒ¼ã‚¸
3. é‡è¦ãªã‚³ãƒ¼ãƒ‰ã®èª¤å‰Šé™¤
4. æ©Ÿå¯†æƒ…å ±ã®èª¤ã‚³ãƒŸãƒƒãƒˆ
5. å¤§ããªãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®èª¤è¿½åŠ 

### äº‹æ•…ã®å½±éŸ¿

- ãƒãƒ¼ãƒ å…¨ä½“ã®é–‹ç™ºã®åœæ»
- æœ¬ç•ªç’°å¢ƒã¸ã®å½±éŸ¿
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯
- ãƒ‡ãƒ¼ã‚¿æå¤±

## 2. äº‹å‰ã®äºˆé˜²ç­–

### ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã®è¨­å®š

```bash
# ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒåã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«è¡¨ç¤ºï¼ˆ.bashrcã‚„.zshrcã«è¿½åŠ ï¼‰
parse_git_branch() {
    git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}
export PS1="\u@\h \w\$(parse_git_branch)\$ "

# ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã®è¨­å®š
git config --global alias.st status
git config --global alias.br branch
git config --global alias.co checkout

# ãƒ—ãƒƒã‚·ãƒ¥å…ˆã®åˆ¶é™
git config --global push.default current
```

### å¿…é ˆã®.gitignoreè¨­å®š

```gitignore
# æ©Ÿå¯†æƒ…å ±
.env
*.key
credentials.json

# IDE/ã‚¨ãƒ‡ã‚£ã‚¿å›ºæœ‰ã®ãƒ•ã‚¡ã‚¤ãƒ«
.idea/
.vscode/
*.swp

# ãƒ“ãƒ«ãƒ‰æˆæœç‰©
/dist
/build
node_modules/

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«
*.log
npm-debug.log*
```

## 3. ãƒ–ãƒ©ãƒ³ãƒä¿è­·ã®è¨­å®š

### GitHubä¸Šã§ã®è¨­å®š

```yaml
# ãƒ–ãƒ©ãƒ³ãƒä¿è­·ãƒ«ãƒ¼ãƒ«ã®ä¾‹
protected_branches:
  main:
    required_status_checks:
      strict: true
    required_pull_request_reviews:
      required_approving_review_count: 2
    restrictions:
      users: ["admin1", "admin2"]
    enforce_admins: true
```

### é‡è¦ãªè¨­å®šé …ç›®

1. ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆåŒ–
2. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯å¿…é ˆåŒ–
3. ç®¡ç†è€…ã«ã‚‚åˆ¶é™ã‚’é©ç”¨
4. ç›´æ¥ãƒ—ãƒƒã‚·ãƒ¥ã®ç¦æ­¢

## 4. Git hooks ã®æ´»ç”¨

### pre-commit ãƒ•ãƒƒã‚¯

```bash
#!/bin/bash
# .git/hooks/pre-commit

# ç¾åœ¨ã®ãƒ–ãƒ©ãƒ³ãƒåã‚’å–å¾—
branch="$(git rev-parse --abbrev-ref HEAD)"

# mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ç›´æ¥ã‚³ãƒŸãƒƒãƒˆã‚’é˜²æ­¢
if [ "$branch" = "main" ]; then
  echo "mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ç›´æ¥ã‚³ãƒŸãƒƒãƒˆã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™"
  exit 1
fi

# æ©Ÿå¯†æƒ…å ±ã®ãƒã‚§ãƒƒã‚¯
if git diff --cached | grep -i "password\|secret\|api_key"; then
  echo "æ©Ÿå¯†æƒ…å ±ã‚‰ã—ãæ–‡å­—åˆ—ãŒå«ã¾ã‚Œã¦ã„ã¾ã™"
  exit 1
fi
```

### pre-push ãƒ•ãƒƒã‚¯

```bash
#!/bin/bash
# .git/hooks/pre-push

# mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒ—ãƒƒã‚·ãƒ¥ã‚’é˜²æ­¢
if [ "$(git rev-parse --abbrev-ref HEAD)" = "main" ]; then
  echo "mainãƒ–ãƒ©ãƒ³ãƒã¸ã®ç›´æ¥ãƒ—ãƒƒã‚·ãƒ¥ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™"
  exit 1
fi

# å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚§ãƒƒã‚¯
git diff --cached --name-only | while read file; do
  if [ -f "$file" ]; then
    size=$(stat -f%z "$file")
    if [ $size -gt 5000000 ]; then
      echo "$file is larger than 5MB"
      exit 1
    fi
  fi
done
```

## 5. ãƒãƒ¼ãƒ å…¨ä½“ã§ã®å–ã‚Šçµ„ã¿

### ãƒ–ãƒ©ãƒ³ãƒé‹ç”¨ãƒ«ãƒ¼ãƒ«

1. ãƒ–ãƒ©ãƒ³ãƒå‘½åè¦å‰‡
```
feature/  # æ–°æ©Ÿèƒ½é–‹ç™º
bugfix/   # ãƒã‚°ä¿®æ­£
hotfix/   # ç·Šæ€¥ã®ä¿®æ­£
release/  # ãƒªãƒªãƒ¼ã‚¹æº–å‚™
```

2. ä½œæ¥­é–‹å§‹æ™‚ã®ãƒ«ãƒ¼ãƒ«
```bash
# å¿…ãšæœ€æ–°ã®mainã‹ã‚‰ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
git checkout main
git pull origin main
git checkout -b feature/new-function
```

3. ä½œæ¥­ä¸­ã®ãƒ«ãƒ¼ãƒ«
```bash
# å®šæœŸçš„ã«mainã®å¤‰æ›´ã‚’å–ã‚Šè¾¼ã‚€
git checkout feature/new-function
git fetch origin
git merge origin/main
```

### ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ—ãƒ­ã‚»ã‚¹

1. ã‚»ãƒ«ãƒ•ãƒ¬ãƒ“ãƒ¥ãƒ¼
```bash
# å¤‰æ›´å†…å®¹ã®ç¢ºèª
git diff main...feature/new-function
```

2. ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¾é ¼å‰ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
- [ ] ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹
- [ ] æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹
- [ ] ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯é©åˆ‡ã‹
- [ ] ãƒ†ã‚¹ãƒˆã¯é€šã£ã¦ã„ã‚‹ã‹

## 6. äº‹æ•…ãŒèµ·ããŸæ™‚ã®å¯¾å‡¦æ³•

### èª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã—ãŸå ´åˆ

```bash
# ç›´å‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—ï¼ˆå¤‰æ›´ã¯ä¿æŒï¼‰
git reset --soft HEAD^

# ã‚³ãƒŸãƒƒãƒˆè‡ªä½“ã‚’å®Œå…¨ã«å–ã‚Šæ¶ˆã—
git reset --hard HEAD^

# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«æˆ»ã™
git checkout HEAD^ -- path/to/file
```

### èª¤ã£ã¦ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸå ´åˆ

```bash
# å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ã§æˆ»ã™ï¼ˆãƒãƒ¼ãƒ å†…ã§è¦ç›¸è«‡ï¼‰
git reset --hard HEAD^
git push -f origin branch-name

# revertã‚³ãƒŸãƒƒãƒˆã§æ‰“ã¡æ¶ˆã™ï¼ˆæ¨å¥¨ï¼‰
git revert HEAD
git push origin branch-name
```

### æ©Ÿå¯†æƒ…å ±ã‚’èª¤ã£ã¦ãƒ—ãƒƒã‚·ãƒ¥ã—ãŸå ´åˆ

1. å³åº§ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç­‰ã®å¤‰æ›´
2. ã‚³ãƒŸãƒƒãƒˆå±¥æ­´ã‹ã‚‰ã®å®Œå…¨å‰Šé™¤
```bash
git filter-branch --force --index-filter \
  "git rm --cached --ignore-unmatch path/to/sensitive-file" \
  --prune-empty --tag-name-filter cat -- --all
```

## ã¾ã¨ã‚

Gitã®äº‹æ•…ã‚’é˜²ããŸã‚ã®ãƒã‚¤ãƒ³ãƒˆï¼š

1. é©åˆ‡ãªãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥ã®æ¡ç”¨
2. è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã®å°å…¥
3. ãƒãƒ¼ãƒ å†…ã§ã®ãƒ«ãƒ¼ãƒ«å…±æœ‰
4. å®šæœŸçš„ãªç ”ä¿®ãƒ»å‹‰å¼·ä¼šã®å®Ÿæ–½

ã“ã‚Œã‚‰ã®å¯¾ç­–ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã§ã€å¤šãã®äº‹æ•…ã‚’æœªç„¶ã«é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚ã¾ãŸã€äº‹æ•…ãŒç™ºç”Ÿã—ãŸå ´åˆã§ã‚‚ã€è¿…é€Ÿã‹ã¤é©åˆ‡ãªå¯¾å¿œãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

## å‚è€ƒãƒªãƒ³ã‚¯
- [Gitå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://git-scm.com/doc)
- [GitHub Security Best Practices](https://docs.github.com/en/code-security)
- [Git Hooks Documentation](https://git-scm.com/docs/githooks)
