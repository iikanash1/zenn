---
title: "Apache HTTPサーバーの構築方法：初心者向けガイド"
emoji: "🌐"
type: "tech"
topics: ["apache", "web", "server", "インフラ", "初心者"]
published: true
---

# Apache HTTPサーバーの構築方法

この記事では、Apache HTTPサーバー（以下、Apache）の基本的な構築方法について説明します。Apacheは世界で最も人気のあるWebサーバーの1つで、安定性と信頼性が高く、多くの機能を提供しています。

## 目次
1. Apacheのインストール
2. 基本設定
3. バーチャルホストの設定
4. セキュリティ設定
5. 動作確認

## 1. Apacheのインストール

### Windows環境の場合

1. [Apache Lounge](https://www.apachelounge.com/download/)から、お使いのWindows環境に合わせたApacheのバイナリをダウンロードします。
2. ダウンロードしたZIPファイルを解凍します。
3. 解凍したApacheフォルダを`C:\Apache24`に配置します。
4. コマンドプロンプトを管理者権限で開き、以下のコマンドを実行します：

```bash
cd C:\Apache24\bin
httpd.exe -k install
```

### Linux環境（Ubuntu）の場合

```bash
# パッケージの更新
sudo apt update
sudo apt upgrade

# Apacheのインストール
sudo apt install apache2
```

## 2. 基本設定

Apacheの主要な設定ファイルは以下の場所にあります：
- Windows: `C:\Apache24\conf\httpd.conf`
- Linux: `/etc/apache2/apache2.conf`

### 重要な基本設定項目

```apache
# ポート設定
Listen 80

# ドキュメントルート設定
DocumentRoot "/var/www/html"  # Linux
DocumentRoot "C:/Apache24/htdocs"  # Windows

# ディレクトリの権限設定
<Directory "/var/www/html">
    Options Indexes FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>
```

## 3. バーチャルホストの設定

複数のWebサイトを1台のサーバーで運用する場合の設定例：

```apache
<VirtualHost *:80>
    ServerName www.example.com
    DocumentRoot "/var/www/example"
    ErrorLog "logs/example-error.log"
    CustomLog "logs/example-access.log" common
</VirtualHost>
```

## 4. セキュリティ設定

基本的なセキュリティ設定：

```apache
# サーバー情報の非表示
ServerTokens Prod
ServerSignature Off

# ディレクトリリスティングの無効化
<Directory "/var/www/html">
    Options -Indexes
</Directory>

# 不要なモジュールの無効化
#LoadModule autoindex_module modules/mod_autoindex.so
```

## 5. 動作確認

### サービスの起動方法

Windows:
```bash
httpd.exe -k start  # 起動
httpd.exe -k stop   # 停止
httpd.exe -k restart  # 再起動
```

Linux:
```bash
sudo systemctl start apache2   # 起動
sudo systemctl stop apache2    # 停止
sudo systemctl restart apache2 # 再起動
```

### 動作確認方法

1. ブラウザを開き、`http://localhost/`にアクセス
2. Apacheのウェルカムページが表示されれば成功

## トラブルシューティング

よくある問題と解決方法：

1. ポート80が使用中の場合
   - 他のサービス（Skype等）が使用していないか確認
   - 別のポートに変更（httpd.confのListen設定）

2. 権限エラーの場合
   - ログファイルを確認（error.log）
   - ディレクトリのパーミッションを確認

3. 設定ファイルの構文エラー
   - `httpd -t`コマンドで設定ファイルの構文チェック

## まとめ

この記事では、Apacheの基本的な構築方法について説明しました。実際の運用では、さらに詳細な設定やセキュリティ対策が必要になりますが、まずはこの基本設定で動作確認を行い、徐々に必要な設定を追加していくことをお勧めします。

## 参考リンク
- [Apache HTTP Server Project](https://httpd.apache.org/)
- [Apache HTTP Server Documentation](https://httpd.apache.org/docs/)
