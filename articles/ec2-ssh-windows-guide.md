---
title: "【完全ガイド】WindowsからEC2へSSH接続：インスタンス起動からログインまで"
emoji: "🚀"
type: "tech"
topics: ["aws", "ec2", "ssh", "windows", "初心者"]
published: true
---

## はじめに

AWSを使い始めたばかりの方が、EC2インスタンス（仮想サーバー）を立てて、そこに接続するまでの一連の流れを、Windowsユーザー向けに徹底解説します。
この記事を読めば、AWSコンソールでのインスタンス作成から、コマンドプロンプトやPowerShellを使ったSSH接続まで、一通りの手順を理解できます。

## Step 1: EC2インスタンスの起動 (AWSコンソールでの操作)

まずは、接続先となるEC2インスタンスをAWS上に作成します。

### 1. EC2ダッシュボードへ移動
AWSマネジメントコンソールにログインし、サービス検索で「EC2」と入力してEC2ダッシュボードを開きます。その後、「インスタンスを起動」ボタンをクリックします。

### 2. 名前とOSイメージの設定
- **名前**: インスタンスの識別に使う名前を入力します。（例: `my-test-server`）
- **アプリケーションおよび OS イメージ**: 「クイックスタート」の中から `Amazon Linux` を選択します。デフォルトで選択されていることが多いです。

### 3. キーペアの作成または選択 (最重要)
- **キーペア (ログイン)**: SSH接続で本人確認に使う「鍵」の役割をします。
    - **初めての場合**: 「新しいキーペアの作成」をクリックし、キーペア名を入力してキーペアを作成します。`.pem` という拡張子のファイルがダウンロードされるので、**絶対に紛失しない安全な場所**に保存してください。（例: `C:\Users\YourUser\.ssh\my-key.pem`）
    - **既存のキーペアを使う場合**: 以前作成したキーペアをドロップダウンから選択します。

> ⚠️ **注意**: この秘密鍵ファイル(`.pem`)は、再発行できません。紛失すると、このキーペアで作成したインスタンスには二度と接続できなくなる可能性があります。

### 4. ネットワーク設定 (セキュリティグループ)
- **ネットワーク設定**の「編集」ボタンをクリックします。
- **セキュリティグループ**: インスタンスへのアクセスを制御するファイアウォールのようなものです。
    - 「セキュリティグループを作成する」を選択します。
    - インバウンドセキュリティグループのルールで、タイプ「SSH」、ソースタイプ「任意の場所」を選択します。
    - ソースに `0.0.0.0/0` が設定されます。これは「インターネット上のどこからでもSSH接続を許可する」という意味です。
    > **セキュリティTIPS**: 学習目的では「任意の場所」で問題ありませんが、実際の運用では、自分のIPアドレス（「マイIP」を選択すると自動入力されます）のみに限定するのが安全です。

### 5. インスタンスを起動
設定内容を確認し、右下の「インスタンスを起動」ボタンをクリックします。成功すると、インスタンスIDが表示されます。

### 6. パブリックIPアドレスの確認
インスタンスIDをクリックしてインスタンスの詳細画面に移動し、「パブリック IPv4 アドレス」をメモしておきます。これが接続先の住所になります。

## Step 2: WindowsからSSHで接続

インスタンスが起動したら、いよいよ自分のPCから接続します。

### 1. ターミナルを開く
Windowsの「コマンドプロンプト」、「PowerShell」、または「Windows Terminal」などを開きます。

### 2. SSHコマンドの組み立て
以下の基本形に、先ほど準備した情報を当てはめてコマンドを作成します。

```bash
ssh -i "秘密鍵のパス" ユーザー名@パブリックIPアドレス
```

- **`ssh`**: SSH接続を開始するコマンド。
- **`-i "秘密鍵のパス"`**: `-i` は認証に使う秘密鍵ファイルを指定するオプションです。Step 1-3で保存した `.pem` ファイルのフルパスを、ダブルクォーテーション `"` で囲んで指定します。
- **`ユーザー名`**: Amazon Linuxの場合は `ec2-user` です。
- **`パブリックIPアドレス`**: Step 1-6で確認したIPアドレスです。

#### コマンド組み立て例
```bash
ssh -i "C:\Users\fjwrm\Downloads\winSCP-test.pem" ec2-user@192.0.2.1
```
*(パスやIPアドレスはご自身のものに置き換えてください)*

### 3. コマンドの実行と初回接続時の確認
組み立てたコマンドをターミナルに貼り付けて実行します。
初めてそのサーバーに接続する場合、以下のような確認メッセージが表示されます。

```
Are you sure you want to continue connecting (yes/no/[fingerprint])?
```
これは「この接続先は信頼できますか？」という問いなので、`yes`と入力してEnterキーを押します。

### 4. ログイン成功！
以下のような表示が出れば、無事にEC2インスタンスへのSSHログインは完了です！

```
   ,     #_
   ~\_  ####_        Amazon Linux 2
  ~~  \_#####\
  ~~     \###|
  ~~       * S P I N
   ~~       |
```

## トラブルシューティング

もしうまく接続できない場合は、以下を確認してみてください。

- **セキュリティグループ**: インバウンドルールで「SSH」(ポート22)が許可されていますか？
- **ファイルパスの間違い**: `-i` で指定した秘密鍵のパスは正しいですか？
- **インスタンスの状態**: EC2インスタンスは「実行中」になっていますか？
- **ユーザー名の間違い**: OSに対応した正しいユーザー名（`ec2-user`など）を使っていますか？

## まとめ

EC2インスタンスの作成からSSH接続まで、一連の流れを解説しました。
重要なポイントは以下の通りです。

1.  **キーペアの秘密鍵(`.pem`)は厳重に保管する。**
2.  **セキュリティグループでSSH(ポート22)のアクセスを許可する。**
3.  **`ssh -i "鍵のパス" ec2-user@IPアドレス` のコマンド形式を覚える。**

この手順に慣れれば、AWS活用の第一歩はクリアです。ぜひ、ご自身の環境で試してみてください。
