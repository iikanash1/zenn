---
title: "【初心者向けハンズオン】AWSでゼロからネットワーク(VPC)とWebサーバー(EC2)を構築しよう！"
emoji: "☁️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["AWS", "VPC", "EC2", "初心者", "インフラ"]
published: true
---

## はじめに

「AWSを勉強したいけど、何から手をつければいいかわからない…」
「EC2ってよく聞くけど、どうやって作るの？」

この記事は、そんなAWS初心者の方々に向けて、**AWS上に自分だけのネットワーク空間を作り、そこにWebサーバーを立ち上げるまで**の全手順を、豊富なスクリーンショットと共に解説するハンズオン記事です。

オンプレミスの知識がなくても大丈夫！この記事を読み終える頃には、AWSの最も基本的な構成を理解し、自分でサーバーを構築できるようになります。

### この記事で学べること  Tl;dr
*   AWSの**ネットワークの基礎 (VPC)** の概念と作り方
*   **仮想サーバー (EC2)** の起動方法
*   簡単な**Webサーバーをインターネットに公開**する手順
*   AWSの主要サービス（VPC, サブネット, IGW, ルートテーブル, セキュリティグループ, EC2）の役割と関係性

### 対象読者
*   AWSをこれから学びたいと考えている方
*   インフラの知識を身につけたいWeb開発者の方
*   実際に手を動かしてクラウドを体験したい方

### 前提条件
*   **AWSアカウントが作成済みであること。**
    * まだの方は、[公式サイト](https://aws.amazon.com/jp/register-flow/)から作成してください。12ヶ月の無料利用枠があります。

それでは、さっそく自分だけのクラウドインフラを構築していきましょう！🚀

---

## 1. AWSにおけるネットワークの基礎知識 (VPC) 🏛️

まず最初に、サーバーを置くための「土地」と「インフラ」を準備します。AWSでは、このプライベートなネットワーク空間を **VPC (Virtual Private Cloud)** と呼びます。

![VPCの全体像](https://storage.googleapis.com/zenn-user-upload/5b951c5f8a0e-20230325.png)
*(イメージ図)*

VPCを構築するために、いくつかの重要なコンポーネントが登場します。現実世界のネットワークに例えながら見ていきましょう。

| AWS用語 | 現実世界の例え | 役割 |
| :--- | :--- | :--- |
| **VPC** | 自分専用のデータセンター | 隔離されたプライベートなネットワーク空間 |
| **サブネット** | データセンター内の部屋 | VPCをさらに細かく分割したネットワーク範囲 |
| **インターネットゲートウェイ** | データセンターの出入り口 | VPCとインターネットを接続するためのゲートウェイ |
| **ルートテーブル** | 交通整理員 | 通信の行き先（経路）を決めるルールブック |
| **セキュリティグループ** | サーバーの警備員 | サーバー単位の仮想ファイアウォール |

今回は、インターネットからアクセスできるWebサーバーを構築するため、これらの部品を一つずつ組み立てていきます。

---

## 2. 【ハンズオン】VPCネットワークを構築してみよう 🛠️

ここからは実際にAWSマネジメントコンソールを操作していきます。
まずは、VPCと、その関連リソースを作成しましょう。

### Step 1: VPCの作成

1.  AWSマネジメントコンソールにログインし、画面上部の検索バーで「VPC」と入力し、VPCサービスに移動します。
2.  左側のメニューから「**VPC**」を選択し、「**VPCを作成**」ボタンをクリックします。
3.  「作成するリソース」で「**VPCなど**」を選択します。（VPCと関連リソースを一括で作れて便利です！）
4.  以下の項目を設定します。
    *   **名前タグの自動生成**: `my-vpc` など、わかりやすい名前を入力します。
    *   **IPv4 CIDR ブロック**: `10.0.0.0/16` （このままでOKです）
    *   **アベイラビリティーゾーン (AZ) の数**: `1`
    *   **パブリックサブネットの数**: `1`
    *   **プライベートサブネットの数**: `0` （今回は使いません）
    *   **NATゲートウェイ**: `なし`
    *   **VPCエンドポイント**: `なし`
5.  設定内容を確認し、画面右下の「**VPCを作成**」をクリックします。

![VPC作成画面](https://storage.googleapis.com/zenn-user-upload/43118cf5f42a-20230325.png)

これで、以下のリソースが自動で作成されました。
*   VPC (`my-vpc`)
*   パブリックサブネット (`my-vpc-subnet-public1-ap-northeast-1a`)
*   インターネットゲートウェイ (`my-vpc-igw`)
*   ルートテーブル (`my-vpc-rtb-public`)

> **💡 アベイラビリティーゾーン (AZ) とは？**
> AZは、AWSのデータセンター群のことです。東京リージョン内にも複数のAZが存在し、それぞれが独立しています。複数のAZにリソースを配置することで、片方のAZで障害が起きてもサービスを継続できる「可用性」の高いシステムを構築できます。

これで、サーバーを置くためのネットワークの土台が完成しました！

![VPC完成図](https://storage.googleapis.com/zenn-user-upload/b554e7d704ba-20230325.png)

---

## 3. 【ハンズオン】仮想サーバー (EC2) を起動してみよう 🤖

次に、今作ったVPCの中に、主役となる仮想サーバー **EC2 (Elastic Compute Cloud)** を起動します。

### Step 2: セキュリティグループの作成

EC2インスタンスには、必ず**セキュリティグループ**という仮想ファイアウォールを関連付ける必要があります。これにより、不正なアクセスを防ぎます。

今回はWebサーバーなので、以下の通信を許可します。
*   **SSH (ポート 22)**: 自分がサーバーに接続して操作するため
*   **HTTP (ポート 80)**: 外部のユーザーがWebサイトを閲覧するため

1.  VPCのダッシュボードの左メニューから「**セキュリティグループ**」を選択し、「**セキュリティグループを作成**」をクリックします。
2.  以下の通り設定します。
    *   **セキュリティグループ名**: `web-server-sg`
    *   **説明**: `for web server`
    *   **VPC**: 先ほど作成した `my-vpc` を選択します。
3.  「**インバウンドルール**」のセクションで、「**ルールを追加**」を2回クリックし、以下の2つのルールを追加します。
    *   **ルール1 (SSH)**
        *   タイプ: `SSH`
        *   ソース: `マイIP` （自動で自分のPCのIPアドレスが入力されます。これにより自分だけがSSH接続できます）
    *   **ルール2 (HTTP)**
        *   タイプ: `HTTP`
        *   ソース: `任意の場所` (`0.0.0.0/0`) （これにより誰でもWebサイトにアクセスできます）
4.  アウトバウンドルールはデフォルト（すべて許可）のままでOKです。
5.  画面右下の「**セキュリティグループを作成**」をクリックします。

![セキュリティグループ作成画面](https://storage.googleapis.com/zenn-user-upload/3a79d0319409-20230325.png)

### Step 3: EC2インスタンスの起動

いよいよEC2インスタンスを起動します！

1.  画面上部の検索バーで「EC2」と入力し、EC2サービスに移動します。
2.  「**インスタンスを起動**」ボタンをクリックします。
3.  以下の項目を設定していきます。
    *   **名前**: `my-web-server`
    *   **アプリケーションおよび OS イメージ (AMI)**: `Amazon Linux` を選択し、`Amazon Linux 2023 AMI` (無料利用枠対象) を選択します。
    *   **インスタンスタイプ**: `t2.micro` (無料利用枠対象) を選択します。
    *   **キーペア (ログイン)**:
        *   「**新しいキーペアの作成**」をクリックします。
        *   キーペア名: `my-key-pair`
        *   キーペアタイプ: `RSA`
        *   プライベートキーファイル形式: `.pem`
        *   「**キーペアを作成**」をクリックすると、`.pem` ファイルがダウンロードされます。**このファイルは再発行できないので、絶対に紛失しないように大切に保管してください。**
        ![キーペア作成](https://storage.googleapis.com/zenn-user-upload/6e439366113b-20230325.png)
    *   **ネットワーク設定**:
        *   「編集」をクリックします。
        *   **VPC**: 作成した `my-vpc` を選択します。
        *   **サブネット**: 作成した `my-vpc-subnet-public1-ap-northeast-1a` を選択します。
        *   **パブリックIPの自動割り当て**: `有効化` になっていることを確認します。
        *   **ファイアウォール (セキュリティグループ)**: 「**既存のセキュリティグループを選択する**」を選び、先ほど作成した `web-server-sg` を選択します。
    ![ネットワーク設定](https://storage.googleapis.com/zenn-user-upload/2c9c7f21223e-20230325.png)
4.  その他の設定はデフォルトのままでOKです。画面右側の「概要」で内容を確認し、「**インスタンスを起動**」をクリックします。

数分待つと、インスタンスの状態が「実行中」に変わります。これでサーバーの起動は完了です！🎉

### Step 4: サーバーに接続してWebサーバーをセットアップ

最後に、起動したEC2インスタンスに接続して、Webサーバー（Apache）をインストールします。

1.  **SSHでサーバーに接続**
    *   EC2のインスタンス一覧画面で、作成した `my-web-server` を選択し、画面上部の「**接続**」ボタンをクリックします。
    *   「SSH クライアント」タブを開くと、接続コマンドの例が表示されます。
    *   ターミナル（macOS/Linux）またはPowerShell（Windows）を開き、先ほどダウンロードしたキーペアファイル (`.pem`) があるディレクトリに移動します。
    *   まず、キーファイルの権限を変更します。
        ```bash
        chmod 400 my-key-pair.pem
        ```
    *   次に、表示されている接続コマンドを実行します。
        ```bash
        # 例: ssh -i "my-key-pair.pem" ec2-user@ec2-XX-XX-XX-XX.ap-northeast-1.compute.amazonaws.com
        ssh -i "【キーペアファイル名】" ec2-user@【インスタンスのパブリックIPv4アドレス】
        ```
    *   `Are you sure you want to continue connecting (yes/no/[fingerprint])?` と聞かれたら `yes` と入力してEnterを押します。
    *   コマンドプロンプトの表示が `[ec2-user@ip-XXX-XXX-XXX-XXX ~]$` のようになれば、接続成功です！

2.  **Webサーバー (Apache) のインストールと起動**
    *   接続したターミナルで、以下のコマンドを順番に実行します。
        ```bash
        # パッケージを最新の状態に更新
        sudo dnf update -y

        # Apache (httpd) をインストール
        sudo dnf install -y httpd

        # Apache を起動
        sudo systemctl start httpd

        # OS起動時にApacheが自動で起動するように設定
        sudo systemctl enable httpd
        ```

3.  **テストページの作成**
    *   簡単なHTMLファイルを作成して、Webサーバーが正しく動いているか確認します。
        ```bash
        echo "<h1>Hello from My AWS Web Server!</h1>" | sudo tee /var/www/html/index.html
        ```

### Step 5: ブラウザからアクセス確認！

さあ、いよいよ最後の確認です。

1.  EC2のインスタンス一覧画面に戻り、`my-web-server` の「**パブリック IPv4 アドレス**」をコピーします。
2.  お使いのブラウザのアドレスバーに、コピーしたIPアドレスを貼り付けてアクセスします。

![ブラウザ表示](https://storage.googleapis.com/zenn-user-upload/8e9d3b1456a6-20230325.png)

「Hello from My AWS Web Server!」と表示されれば、ハンズオンは大成功です！おめでとうございます！🥳

---

## 4. 後片付け（リソースの削除）🧹

AWSは従量課金制です。無料利用枠を超えて思わぬ請求が発生しないように、使い終わったリソースは必ず削除しましょう。

削除には順番があります。以下の手順で削除してください。

1.  **EC2インスタンスの終了**
    *   EC2ダッシュボード > インスタンス > `my-web-server` を選択 > 「インスタンスの状態」 > 「**インスタンスを終了**」
2.  **VPCの削除**
    *   VPCダッシュボード > VPC > `my-vpc` を選択 > 「アクション」 > 「**VPCを削除**」
    *   確認画面で `delete` と入力して削除します。
    *   VPCを削除すると、関連付けられていたサブネット、ルートテーブル、インターネットゲートウェイも一緒に削除されるので便利です。
3.  **（任意）セキュリティグループとキーペアの削除**
    *   これらは保持していても料金はかかりませんが、不要であれば削除しておきましょう。

---

## まとめと次のステップ

今回は、AWSの基本的なサービスを組み合わせて、ネットワーク（VPC）とWebサーバー（EC2）を構築しました。

*   **VPC** でプライベートなネットワーク空間を作り、
*   **サブネット** でネットワークを分割し、
*   **インターネットゲートウェイ** と **ルートテーブル** でインターネットへの経路を確保し、
*   **セキュリティグループ** でサーバーを守り、
*   **EC2** という仮想サーバーを起動しました。

これらのコンポーネントの関係性を理解することが、AWSを使いこなすための第一歩です。

### Next Steps 🚀
今回構築した構成は最もシンプルなものです。ここからさらに発展させて、より実践的な構成に挑戦してみましょう！

*   **プライベートサブネットとNATゲートウェイ**: DBサーバーなど、外部に公開しないリソースを安全に配置する。
*   **RDS**: マネージドなデータベースサービスを使ってEC2と連携させる。
*   **ELB (ALB)**: ロードバランサーを使って複数のEC2にトラフィックを分散させ、可用性を高める。
*   **IAM**: ユーザーや権限を適切に管理してセキュリティを向上させる。
*   **IaC (Terraform, CloudFormation)**: ここまでの手順をコードで自動化する。

クラウドの世界は奥が深く、とてもエキサイティングです。ぜひ、次のステップに進んでみてください！

---
最後までお読みいただきありがとうございました！
この記事が、あなたのAWS学習の助けになれば幸いです。